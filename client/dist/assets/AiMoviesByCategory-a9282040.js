import{a as y,o as f,p as v,q as l,s as C,r as c,u as M,b as a,S as d,v as p,j as E,F as h,D as F}from"./index-3e55079a.js";import{C as B}from"./CategoryTitle.component-6fa465c6.js";import{E as L}from"./AIGeneratedMovies.styles-701da3ec.js";const S=t=>{const{data:s,isLoading:r,isFetching:o,isError:i}=y(["ai-movies-by-category",t],()=>f(t));return{data:s==null?void 0:s.data,isLoading:r,isError:i,isFetching:o}},w=t=>{const s=v(),{data:r,mutate:o,isError:i,error:e,isLoading:n}=l({mutationFn:()=>C(t),onSuccess:()=>{s.invalidateQueries(["ai-movies-by-category",t])}});return{mutate:o,isError:i,error:e,isLoading:n}},D=()=>{var n;const[t,s]=c.useState(!0),{categoryName:r}=M(),{mutate:o,isError:i}=w(r),{data:e}=S(r);if(c.useEffect(()=>{var u;e&&((u=e==null?void 0:e.movies)!=null&&u.length?s(!1):o())},[e]),c.useEffect(()=>{i&&s(!1)},[i]),i)return a(L,{children:"Damn you AI! Sorry, something went wrong. Try again"});if(t)return a(d,{children:a(p,{})});if((n=e==null?void 0:e.movies)!=null&&n.length){const u=e.mainMovie,g=e.movies,m=[u,...g];return E(h,{children:[a(B,{title:r}),a(F,{data:m}),";"]})}};export{D as default};
